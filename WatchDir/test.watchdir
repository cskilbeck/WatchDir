<?xml version="1.0" encoding="utf-8"?>

<watchdir>

  <watch>
    <path>"%HOMEDIR%\Projects\TypescriptTest"</path>
    <recursive>true</recursive>
    <triggers>
      <trigger>delete</trigger>
      <trigger>create</trigger>
      <trigger>rename</trigger>
      <trigger>modify</trigger>
    </triggers>
    <ignore>*.sln;*.txt</ignore>
    <include>*.cpp;*.h</include>

    <command async="true">
      <exec async="true">winscp open "FatCow" upload %{filename} exit</exec>
    </command>

    <command>
      <exec>mkdir Z:\%{folder}</exec>
    </command>

    <command on="create modify">
      <exec>copy /y %{fullpath} Z:%{folder}</exec>
      <exec>echo Copied %{fullpath} to Z:%{folder}</exec>
    </command>

    <command on="rename">
      <exec>ren /y Z:%{folder}%{oldfilename} Z:%{folder}%{filename}</exec>
    </command>

    <command on="delete">
      <exec>del /y Z:%{folder}%{filename}</exec>
    </command>
  </watch>

</watchdir>
